{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NISHANTH\\\\Downloads\\\\Document_Signature_App_Skeleton\\\\signature-app\\\\client\\\\src\\\\components\\\\SignatureCanvas.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport API from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\nfunction SignatureCanvas({\n  fileUrl,\n  docId\n}) {\n  _s();\n  const [numPages, setNumPages] = useState(null);\n  const [signaturePosition, setSignaturePosition] = useState(null);\n  const onDocumentLoadSuccess = ({\n    numPages\n  }) => {\n    setNumPages(numPages);\n  };\n  const handlePlaceSignature = (e, pageNumber) => {\n    const rect = e.target.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = rect.bottom - e.clientY;\n    setSignaturePosition({\n      x,\n      y,\n      pageNumber\n    });\n  };\n  const handleSaveSignature = async () => {\n    if (!signaturePosition) return alert('Place signature first');\n    try {\n      await API.post('/signatures/add', {\n        docId,\n        ...signaturePosition\n      });\n      alert('Signature position saved.');\n    } catch (err) {\n      console.error(err);\n      alert('Error saving signature.');\n    }\n  };\n  const handleFinalize = async () => {\n    try {\n      const signerIP = '127.0.0.1'; // Replace with actual IP capture logic if needed\n      await API.post('/signatures/finalize', {\n        docId,\n        signerIP\n      });\n      alert('Document finalized with signatures.');\n    } catch (err) {\n      console.error(err);\n      alert('Error finalizing document.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(Document, {\n      file: fileUrl,\n      onLoadSuccess: onDocumentLoadSuccess,\n      children: Array.from(new Array(numPages), (el, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative border mb-4\",\n        onClick: e => handlePlaceSignature(e, index + 1),\n        children: [/*#__PURE__*/_jsxDEV(Page, {\n          pageNumber: index + 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), signaturePosition && signaturePosition.pageNumber === index + 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute w-20 h-6 bg-blue-500 text-white text-xs flex items-center justify-center\",\n          style: {\n            left: signaturePosition.x,\n            bottom: signaturePosition.y,\n            transform: 'translate(-50%, 50%)',\n            pointerEvents: 'none'\n          },\n          children: \"Signature\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }, this)]\n      }, `page_${index + 1}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex space-x-4 mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSaveSignature,\n        className: \"bg-green-500 text-white px-4 py-2 rounded\",\n        children: \"Save Signature Position\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleFinalize,\n        className: \"bg-blue-500 text-white px-4 py-2 rounded\",\n        children: \"Finalize Document\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(SignatureCanvas, \"+xz58llUx42mfqawpXJdOTszP/Q=\");\n_c = SignatureCanvas;\nexport default SignatureCanvas;\nvar _c;\n$RefreshReg$(_c, \"SignatureCanvas\");","map":{"version":3,"names":["React","useState","Document","Page","pdfjs","API","jsxDEV","_jsxDEV","GlobalWorkerOptions","workerSrc","version","SignatureCanvas","fileUrl","docId","_s","numPages","setNumPages","signaturePosition","setSignaturePosition","onDocumentLoadSuccess","handlePlaceSignature","e","pageNumber","rect","target","getBoundingClientRect","x","clientX","left","y","bottom","clientY","handleSaveSignature","alert","post","err","console","error","handleFinalize","signerIP","className","children","file","onLoadSuccess","Array","from","el","index","onClick","fileName","_jsxFileName","lineNumber","columnNumber","style","transform","pointerEvents","_c","$RefreshReg$"],"sources":["C:/Users/NISHANTH/Downloads/Document_Signature_App_Skeleton/signature-app/client/src/components/SignatureCanvas.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Document, Page, pdfjs } from 'react-pdf';\r\nimport API from '../utils/api';\r\n\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\r\n\r\nfunction SignatureCanvas({ fileUrl, docId }) {\r\n  const [numPages, setNumPages] = useState(null);\r\n  const [signaturePosition, setSignaturePosition] = useState(null);\r\n\r\n  const onDocumentLoadSuccess = ({ numPages }) => {\r\n    setNumPages(numPages);\r\n  };\r\n\r\n  const handlePlaceSignature = (e, pageNumber) => {\r\n    const rect = e.target.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const y = rect.bottom - e.clientY;\r\n    setSignaturePosition({ x, y, pageNumber });\r\n  };\r\n\r\n  const handleSaveSignature = async () => {\r\n    if (!signaturePosition) return alert('Place signature first');\r\n    try {\r\n      await API.post('/signatures/add', { docId, ...signaturePosition });\r\n      alert('Signature position saved.');\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Error saving signature.');\r\n    }\r\n  };\r\n\r\n  const handleFinalize = async () => {\r\n    try {\r\n      const signerIP = '127.0.0.1'; // Replace with actual IP capture logic if needed\r\n      await API.post('/signatures/finalize', { docId, signerIP });\r\n      alert('Document finalized with signatures.');\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Error finalizing document.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <Document file={fileUrl} onLoadSuccess={onDocumentLoadSuccess}>\r\n        {Array.from(new Array(numPages), (el, index) => (\r\n          <div\r\n            key={`page_${index + 1}`}\r\n            className=\"relative border mb-4\"\r\n            onClick={(e) => handlePlaceSignature(e, index + 1)}\r\n          >\r\n            <Page pageNumber={index + 1} />\r\n            {signaturePosition && signaturePosition.pageNumber === index + 1 && (\r\n              <div\r\n                className=\"absolute w-20 h-6 bg-blue-500 text-white text-xs flex items-center justify-center\"\r\n                style={{\r\n                  left: signaturePosition.x,\r\n                  bottom: signaturePosition.y,\r\n                  transform: 'translate(-50%, 50%)',\r\n                  pointerEvents: 'none',\r\n                }}\r\n              >\r\n                Signature\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </Document>\r\n      <div className=\"flex space-x-4 mt-4\">\r\n        <button onClick={handleSaveSignature} className=\"bg-green-500 text-white px-4 py-2 rounded\">\r\n          Save Signature Position\r\n        </button>\r\n        <button onClick={handleFinalize} className=\"bg-blue-500 text-white px-4 py-2 rounded\">\r\n          Finalize Document\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignatureCanvas;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}